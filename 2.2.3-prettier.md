# Prettier

## é¦–å…ˆæ˜ç¡®ä¸€ä¸ªé—®é¢˜ï¼Œä½ çš„ESLintçœŸçš„éœ€è¦Prettierå—ï¼Ÿ

è¦è§£ç­”è¿™ä¸ªç–‘é—®â“æˆ‘ä»¬é¦–å…ˆéœ€è¦çŸ¥é“ESLintå’ŒPrettieræ˜¯åšä»€ä¹ˆçš„ï¼

## ä»€ä¹ˆæ˜¯ESLintï¼Ÿ

æˆ‘ä»¬é€šè¿‡å®˜ç½‘å¯çŸ¥ï¼ŒESLintæ˜¯æ˜¯åœ¨ ECMAScript/JavaScript ä»£ç ä¸­è¯†åˆ«å’ŒæŠ¥å‘Šæ¨¡å¼åŒ¹é…çš„æ£€æŸ¥å·¥å…·ã€‚å®ƒçš„ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªæ’ä»¶åŒ–çš„javascriptä»£ç æ£€æµ‹å·¥å…·,ä¿è¯ä»£ç çš„ä¸€è‡´æ€§å’Œé¿å…é”™è¯¯ã€‚å…¶ä½¿ç”¨ AST å»åˆ†æä»£ç ä¸­çš„æ¨¡å¼ã€‚

## ä»€ä¹ˆæ˜¯Prettierï¼Ÿ

ä¹Ÿæ˜¯æŸ¥é˜…å®˜ç½‘ï¼ŒPrettieræ˜¯ä¸€ä¸ª"æœ‰æ€åº¦"çš„ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œå®ƒæ”¯æŒå¤§é‡ç¼–ç¨‹è¯­è¨€ï¼Œå¹¶å‡ ä¹ä¸éœ€è¦è®¾ç½®å‚æ•°ã€‚Prettierä¼šæŒ‰ç…§é…ç½®å…¶é…ç½®ï¼Œå°†ä»£ç ä»¥ç»Ÿä¸€å›ºå®šçš„æ ¼å¼é‡æ–°è¾“å‡ºï¼Œå…¶å¹¶ä¸å…³å¿ƒä½ æ ¼å¼åŒ–å‰çš„ä»£ç æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚

ç®€å•äº†è§£äº†ESLintå’ŒPrettieræ˜¯ä»€ä¹ˆä¹‹åï¼Œä»ç„¶æ²¡æœ‰åŠæ³•è§£ç­”ï¼Œåªç”¨ESLintä¸å¥½å—ï¼Ÿè®©æˆ‘ä»¬æ›´æ·±å…¥çš„äº†è§£Prettierå§ï¼

## ESLintå’ŒPrettierçš„åŒºåˆ«ï¼š

ç»è¿‡å¯¹Prettierå®˜ç½‘Prettier vs. Lintersçš„é˜…è¯»å¾—çŸ¥ï¼š

- ESLint/TSLint/stylelintè¿™äº›å·¥å…·éƒ½å±äºLintersã€‚
- Linters æœ‰ä¸¤ç±»è§„åˆ™ï¼šCode-quality Ruleså’ŒFormatting Rulesã€‚å³æ ¼å¼åŒ–è§„åˆ™å’Œä»£ç è´¨é‡è§„åˆ™ã€‚
- Code-quality rulesï¼ˆä»£ç è´¨é‡è§„åˆ™ï¼‰ï¼Œä¿è¯ä»£ç çš„è´¨é‡ï¼Œé¿å…æŠ¥é”™ï¼Œå¦‚no-unused-vars, no-extra-bind, no-implicit-globals, prefer-promise-reject-errorsâ€¦
- Formatting rulesï¼ˆæ ¼å¼åŒ–è§„åˆ™ï¼‰ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æ ¼å¼åŒ–ä»£ç ï¼Œä¿è¯ä»£ç çš„ä¸€è‡´æ€§ï¼Œå¦‚max-len, no-mixed-spaces-and-tabs, keyword-spacing, comma-styleâ€¦

å®˜ç½‘å¾ˆæ˜ç¡®çš„è¯´æ˜ï¼š
å¯¹äºCode-quality rulesç›¸å…³çš„ï¼ŒPrettier å¯¹è¿™äº›è§„åˆ™æ²¡æœ‰ä»»ä½•å¸®åŠ©ã€‚å®ƒä»¬ä¹Ÿæ˜¯ linter æä¾›çš„æœ€é‡è¦çš„ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½ä¼šåœ¨æ‚¨çš„ä»£ç ä¸­æ•è·çœŸæ­£çš„é”™è¯¯ã€‚

å¯¹äºFormatting rulesï¼ŒPrettier å‡è½»äº†å¯¹è¿™ä¸€æ•´ç±»è§„åˆ™çš„éœ€æ±‚ï¼ Prettier å°†ä»¥ä¸€è‡´çš„æ–¹å¼ä»å¤´å¼€å§‹é‡æ–°æ‰“å°æ•´ä¸ªç¨‹åºï¼Œå› æ­¤ç¨‹åºå‘˜ä¸å¯èƒ½å†åœ¨é‚£é‡ŒçŠ¯é”™è¯¯äº†ã€‚

è¿™ä¹Ÿæ­£å’Œå‰æ–‡æåˆ°çš„å‘¼åº”ï¼ŒPrettierå°†ä»£ç ä»¥ç»Ÿä¸€å›ºå®šçš„æ ¼å¼é‡æ–°è¾“å…¥ï¼Œå¹¶ä¸”å› ä¸ºå®ƒä¸å…³å¿ƒä½ åŸæ¥çš„ä»£ç æ˜¯ä»€ä¹ˆï¼Œå°±ç®—æ˜¯å¨å±ï¼Œå®ƒä¹Ÿèƒ½ç»™ä½ æ ¼å¼åŒ–å¥½ã€‚æ‰€ä»¥æœ€åPrettieråœ¨æœ¬ç« èŠ‚è¯´é“ï¼š

> ä½¿ç”¨ Prettier è¿›è¡Œæ ¼å¼åŒ–ï¼Œä½¿ç”¨ linters æ¥æ•æ‰é”™è¯¯ï¼

è¿›ä¸€æ­¥çš„äº†è§£ä¹‹åï¼Œæˆ‘ä»¬æ˜ç™½äº†Prettierçš„å¥½å¤„ï¼Œä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰è§£ç­”æˆ‘ä»¬çš„é—®é¢˜ï¼Œæ—¢ç„¶ESLintä¹Ÿæœ‰Formatting Rulesï¼Œä¹Ÿèƒ½è¿›è¡Œæ ¼å¼åŒ–ä»£ç ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨Prettierå‘¢ï¼Ÿä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰Prettierå‘¢ï¼Ÿ

## ä¸ºä»€ä¹ˆä½¿ç”¨Prettierï¼Ÿ

é€šè¿‡å¯¹Why Prettier? çš„é˜…è¯»ï¼Œä»¥åŠå¯¹Prettierçš„äº†è§£ï¼Œæˆ‘ä»¬çŸ¥é“Prettierä»…ä»…æ˜¯ä¸€ä¸ªçº¯çº¯çš„ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œå¹¶ä¸”ä¸‡ç‰©çš†å¯å¯è§†åŒ–ã€‚

å¯¹äºæ ¼å¼åŒ–è§„åˆ™ï¼Œå®ƒå’ŒESLintè¿™ç±»ä¸åŒçš„æ˜¯ï¼š

- ESLintæ˜¯åªæœ‰ä¸ç¬¦åˆæŸä¸€ä¸ªè§„åˆ™åï¼ŒESLIintæ‰ä¼šè¿›è¡Œæ ¼å¼åŒ–ã€‚
- è€ŒPrettieræ˜¯æŒ‰ç…§ç‰¹å®šçš„æ ¼å¼ï¼Œä¸ç®¡æ˜¯å¦ç¬¦åˆè§„åˆ™ï¼Œå…¨éƒ¨éƒ½ä¼šè¿›è¡Œæ ¼å¼åŒ–ã€‚

è¿™æ ·è¯´å¯èƒ½ä¸å¤ªå¥½ç†è§£ï¼Œæˆ‘ä»¬æ‹¿max-lenä¸¾ä¸ªğŸŒ°ï¼š
åœ¨ESLintä¸­ï¼Œ

```js
const {test1, test2, test3,test4} = obj;

const {test1,
test2,
    test3
    test4
} = obj;
```

è¿™ä¸¤ç§å†™æ³•éƒ½ç¬¦åˆ[max-len](https://eslint.org/docs/latest/rules/max-len)è§„åˆ™ã€‚

ç¬¬äºŒç§å†™æ³•è™½ç„¶å¾ˆğŸŒ¶ğŸ”ï¼Œä½†å¹¶ä¸ä¼šè¢«ESLintä¿®æ”¹ã€‚è¿™ä¹Ÿå°±ä¼šé€ æˆä»£ç é£æ ¼ä¸ç»Ÿä¸€ï¼Œä½†å¦‚æœä½¿ç”¨Prettierï¼Œåˆ™è¿™ä¿©å¿…é¡»æ­»ä¸€ä¸ªï¼Œç»è¿‡Prettieråï¼Œæœ€åä»£ç ä¸€å®šåªæœ‰ä¸€ç§ã€‚

è¿™ä¹Ÿæ˜¯å‰é¢æåˆ°çš„ï¼š Lintersåœ¨ä¸ç¬¦åˆè§„åˆ™çš„æ—¶å€™æ‰ä¼šæ ¼å¼åŒ–ï¼ŒPrettieræ˜¯ä¸ç®¡ä½ ç¬¦ä¸ç¬¦åˆè§„åˆ™ï¼Œéƒ½ä¼šæŒ‰ç…§ç‰¹å®šçš„è§„åˆ™æ ¼å¼åŒ–ã€‚

æ‰€ä»¥ç»è¿‡Prettieræ ¼å¼åŒ–åçš„ä»£ç ï¼Œä¸€å®šæ˜¯é£æ ¼ç›¸åŒçš„ä»£ç ã€‚

è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå°±ä¸éœ€è¦å…³æ³¨ä»£ç é£æ ¼ï¼Œå› ä¸ºæ— è®ºæ€ä¹ˆå †shiï¼ˆä¸æ¨èï¼Œå·¥å…·ä»…ä»…æ˜¯ä½œä¸ºå…œåº•ï¼Œè‰¯å¥½çš„ä»£ç âœğŸ»ä¹ æƒ¯è¿˜æ˜¯è¦åœ¨å¹³æ—¶å¼€å‘çš„æ—¶å€™æ³¨æ„ğŸ“¢ï¼Œåšä¼˜ç§€çš„æ‰“å·¥äººğŸ‘·ğŸ»â€â™‚ï¸ï¼‰ï¼Œæœ€åçš„ä»£ç æ ¼å¼ä¸€å®šæ˜¯ä¸€æ ·çš„ã€‚

è¿™é‡Œï¼Œå¥½åƒèƒ½å¤Ÿè§£ç­”æˆ‘çš„é—®é¢˜äº†ï¼ä½†æ˜¯æˆ‘åˆçœ‹åˆ°äº†ESLintå®˜ç½‘çš„ï¼š

> ä½ å¯ä»¥åœ¨ npmjs.com æœç´¢ â€œeslint-configâ€ ä½¿ç”¨åˆ«äººåˆ›å»ºå¥½çš„é…ç½®ã€‚åªæœ‰åœ¨ä½ çš„é…ç½®æ–‡ä»¶ä¸­æ‰©å±•äº†ä¸€ä¸ªå¯åˆ†äº«çš„é…ç½®æˆ–è€…æ˜ç¡®å¼€å¯ä¸€ä¸ªè§„åˆ™ï¼ŒESLint æ‰ä¼šå»æ ¡éªŒä½ çš„ä»£ç ã€‚
>
> ESLintæ²¡æœ‰æ‰¾åˆ°é€‚åˆçš„è§„åˆ™ï¼Ÿåˆ›å»ºè‡ªå®šä¹‰è§„åˆ™ã€‚

æˆ‘æ„Ÿè§‰æˆ‘æŸ¥çš„èµ„æ–™è¿˜æ˜¯ç»•ä¸è¿‡è¿™é‡Œï¼è¿˜æ˜¯æ²¡æœ‰è¯´æ˜Prettierä¸€å®šéœ€è¦ï¼

æ¥ç€æ•´ï¼Œæ¥ç€çœ‹ï¼ï¼ï¼

## å¦‚ä½•ä½¿ç”¨ESLint+Prettierè¿›è¡Œä»£ç æ ¼å¼åŒ–

è¿™é‡Œï¼Œä»…ä»…æä¾›ä¸€ä¸‹Prettierå®˜ç½‘çš„æ€è·¯ã€‚

æ—¥å¸¸é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ESLintä¿è¯ä»£ç è´¨é‡ï¼Œä½¿ç”¨Prettierä¿è¯ä»£ç é£æ ¼ç»Ÿä¸€ã€‚

é¦–å…ˆæˆ‘ä»¬é€šè¿‡å¯¹[Integrating with Linters](https://www.prettier.cn/docs/integrating-with-linters.html)è¿™ä¸€ç« èŠ‚çš„é˜…è¯»ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œ
é€šè¿‡ä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå¯ä»¥è½»æ¾å…³é—­ä¸ Prettier å†²çªæˆ–ä¸å¿…è¦çš„è§„åˆ™ï¼š`eslint-config-prettier`ã€‚é¡¾åæ€ä¹‰ï¼Œå…³é—­ESLintå’ŒPrettierå†²çªçš„ä»£ç æ ¼å¼åŒ–è§„åˆ™ï¼

æœ‰ä¸€äº›æ’ä»¶å¯ä»¥è®©ä½ åƒè¿è¡Œ linter è§„åˆ™ä¸€æ ·è¿è¡Œ Prettierï¼š`eslint-plugin-prettier`ï¼Œè¿™äº›æ’ä»¶èƒ½å¤Ÿåœ¨ESLintä¸­å®ç°PrettieråŠŸèƒ½ï¼Œè¿™æ ·ï¼ŒESLintå°±å¯ä»¥å’ŒPrettierä¸€èµ·æ— ç¼ä½¿ç”¨äº†ã€‚

è¿˜æœ‰ä¸€ç§æ€è·¯ï¼Œæ˜¯ä½¿ç”¨`prettier-eslint`ï¼Œè¿™ä¸ªæ’ä»¶è¿è¡ŒPrettierï¼Œç„¶åæ‰§è¡Œeslint --fixï¼Œæ•´å¥—æµç¨‹ï¼šCode â¡ï¸ prettier â¡ï¸ eslint --fix â¡ï¸ï¼Œä½†è¿™ç§æ–¹å¼ä¼šæ¯”ä»…ä»…è¿è¡ŒPrettieræ…¢å¾—å¤šï¼Œæ€§èƒ½ä¸å¥½ã€‚

## æ€»ç»“

æˆ‘ä»¬çŸ¥é“äº†ESLintå’ŒPrettierå„è‡ªçš„åŠŸèƒ½ï¼Œå„è‡ªçš„ä¾§é‡ç‚¹ã€‚

- ESLintä»…ä»…å¯¹ ECMAScript/JavaScript è¿›è¡Œæ£€æµ‹ï¼›Prettieræ”¯æŒå¤šç§è¯­è¨€ã€‚
- ESLintæ—¢èƒ½æ”¯æŒä»£ç æ ¼å¼åŒ–ï¼Œä¹Ÿèƒ½ä¿è¯ä»£ç è´¨é‡ï¼›Prettierä»…ä»…æ˜¯å¯¹ä»£ç è¿›è¡Œæ ¼å¼åŒ–ã€‚
- ESLintæ›´åŠ çµæ´»ï¼Œæ”¯æŒè‡ªå®šä¹‰è§„åˆ™ï¼ˆæ— é™çš„å¯èƒ½æ€§ï¼‰ï¼›Prettierå›ºæ‰§ï¼Œè®¾è®¡ä¹‹åˆå°±å¸Œæœ›ç¨‹åºå‘˜ä¸è¿‡å¤šçš„å…³æ³¨ä¾èµ–ï¼Œæ‰€ä»¥å¯¼è‡´çµæ´»æ€§ä¸é«˜ï¼Œå¯é…ç½®é¡¹å°‘ï¼ˆå®˜ç½‘æ€æƒ³ï¼šå¦‚æœè§‰å¾—ä¸å¤Ÿçµæ´»ï¼Œå°±ä¸è¦ç”¨ï¼ï¼ï¼ï¼‰

## é…ç½®prettier

```shell
pnpm add prettier -D
```

åœ¨æ ¹ç›®å½•ä¸‹æ–°å»º.prettierrc.cjs
æ·»åŠ ä»¥ä¸‹é…ç½®ï¼Œæ›´å¤šé…ç½®å¯æŸ¥çœ‹[å®˜æ–¹æ–‡æ¡£](https://prettier.io/docs/en/options.html)

```js
module.exports = {
  // ä¸€è¡Œçš„å­—ç¬¦æ•°ï¼Œå¦‚æœè¶…è¿‡ä¼šè¿›è¡Œæ¢è¡Œï¼Œé»˜è®¤ä¸º80
  printWidth: 100,
  // ä¸€ä¸ªtabä»£è¡¨å‡ ä¸ªç©ºæ ¼æ•°ï¼Œé»˜è®¤ä¸º2
  tabWidth: 2,
  // æ˜¯å¦ä½¿ç”¨tabè¿›è¡Œç¼©è¿›ï¼Œé»˜è®¤ä¸ºfalseï¼Œè¡¨ç¤ºç”¨ç©ºæ ¼è¿›è¡Œç¼©å‡
  useTabs: false,
  // å­—ç¬¦ä¸²æ˜¯å¦ä½¿ç”¨å•å¼•å·ï¼Œé»˜è®¤ä¸ºfalseï¼Œä½¿ç”¨åŒå¼•å·
  singleQuote: true,
  // è¡Œä½æ˜¯å¦ä½¿ç”¨åˆ†å·ï¼Œé»˜è®¤ä¸ºtrue
  semi: false,
  // æ˜¯å¦ä½¿ç”¨å°¾é€—å·ï¼Œæœ‰ä¸‰ä¸ªå¯é€‰å€¼"<none|es5|all>"
  trailingComma: 'none',
  // å¯¹è±¡å¤§æ‹¬å·ç›´æ¥æ˜¯å¦æœ‰ç©ºæ ¼ï¼Œé»˜è®¤ä¸ºtrueï¼Œæ•ˆæœï¼š{ foo: bar }
  bracketSpacing: true
}
```

åœ¨`package.json`å¢åŠ  `script`:

```json
{
  "scripts": {
    "format": "prettier --write './**/*.{html,vue,ts,,js,cjs,,tsx,jsx,json,,css,scss,md}'"
  }
}
```

## è§£å†³eslintä¸prettierçš„å†²çª

åœ¨ç†æƒ³çš„çŠ¶æ€ä¸‹ï¼Œeslintä¸prettieråº”è¯¥å„å¸å…¶èŒã€‚eslintè´Ÿè´£æˆ‘ä»¬çš„ä»£ç è´¨é‡ï¼Œprettierè´Ÿè´£æˆ‘ä»¬çš„ä»£ç æ ¼å¼ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ä¼šå‘ç°ï¼Œå¦‚æœæˆ‘ä»¬å¼€å¯äº†è‡ªåŠ¨åŒ–çš„eslintä¿®å¤ä¸è‡ªåŠ¨åŒ–çš„æ ¹æ®prettieræ¥æ ¼å¼åŒ–ä»£ç ã€‚å½“æˆ‘ä»¬å·²ä¿å­˜ä»£ç æ—¶ï¼Œä¼šå‡ºç°å±å¹•é—ªä¸€èµ·ååˆæ¢å¤åˆ°äº†æŠ¥é”™çš„çŠ¶æ€ã€‚

è¿™å…¶ä¸­çš„æ ¹æœ¬åŸå› å°±æ˜¯eslintæœ‰éƒ¨åˆ†è§„åˆ™ä¸prettierå†²çªäº†ï¼Œæ‰€ä»¥ä¿å­˜çš„æ—¶å€™æ˜¾ç¤ºè¿è¡Œäº†eslintçš„ä¿®å¤å‘½ä»¤ï¼Œç„¶åå†è¿è¡Œprettieræ ¼å¼åŒ–ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°å±å¹•é—ªä¸€ä¸‹ç„¶ååˆæ¢å¤åˆ°æŠ¥é”™çš„ç°è±¡ã€‚è¿™æ—¶å€™ä½ å¯ä»¥æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å­˜åœ¨å†²çªçš„è§„åˆ™ã€‚

æŸ¥é˜…èµ„æ–™ä¼šå‘ç°ï¼Œç¤¾åŒºå·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªéå¸¸æˆç†Ÿçš„æ–¹æ¡ˆï¼Œå³`eslint-config-prettier + eslint-plugin-prettier`ã€‚

- eslint-plugin-prettierï¼š åŸºäº prettier ä»£ç é£æ ¼çš„ eslint è§„åˆ™ï¼Œå³eslintä½¿ç”¨pretterè§„åˆ™æ¥æ ¼å¼åŒ–ä»£ç ã€‚
- eslint-config-prettierï¼š ç¦ç”¨æ‰€æœ‰ä¸æ ¼å¼ç›¸å…³çš„ eslint è§„åˆ™ï¼Œè§£å†³ prettier ä¸ eslint è§„åˆ™å†²çªã€‚ç¡®ä¿å°†å…¶æ”¾åœ¨ extends é˜Ÿåˆ—æœ€åï¼Œè¿™æ ·å®ƒå°†è¦†ç›–å…¶ä»–é…ç½®ã€‚

### å®‰è£…ä¾èµ–

```shell
pnpm add eslint-config-prettier eslint-plugin-prettier -D
```

### åœ¨ .eslintrc.jsonä¸­extendsçš„æœ€åæ·»åŠ ä¸€ä¸ªé…ç½®

```js
{
  extends: [
    'plugin:vue/vue3-essential',
    // æ–°å¢ï¼Œå¿…é¡»æ”¾åœ¨æœ€åé¢
    'plugin:prettier/recommended'
  ],
}
```

ç„¶åä½ ä¼šå‘ç°å†²çªæ¶ˆå¤±äº†ï¼Œeslintä¸prettierä¹ŸæŒ‰ç…§æˆ‘ä»¬é¢„æƒ³çš„å„å¸å…¶èŒäº†ã€‚

## è§£å†³eslintä¸stylelintçš„å†²çª

### å®‰è£…ä¾èµ–

```shell
pnpm add stylelint-config-prettier -D
```

- stylelint-config-prettier: å…³é—­æ‰€æœ‰ä¸å¿…è¦æˆ–å¯èƒ½ä¸Prettierå†²çªçš„è§„åˆ™

### åœ¨ .eslintrc.jsonä¸­extendsçš„æœ€åæ·»åŠ ä¸€ä¸ªé…ç½®

```js
{
  extends: [
    'stylelint-config-prettier'
  ],
}
```

> Note: As of Stylelint v15 all style-related rules have been deprecated. If you are using v15 or higher and are not making use of these deprecated rules, this plugin is no longer necessary.
